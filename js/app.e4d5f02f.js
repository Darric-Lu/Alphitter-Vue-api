(function(e){function t(t){for(var a,s,c=t[0],o=t[1],l=t[2],u=0,d=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n={app:0},i=[];function c(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-56c36846":"effb400e","chunk-5a8602ac":"2839cc89","chunk-923796f6":"92e5d701","chunk-a9e92636":"d27b22a7"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r={"chunk-56c36846":1,"chunk-5a8602ac":1,"chunk-923796f6":1,"chunk-a9e92636":1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-56c36846":"aa3cbfc5","chunk-5a8602ac":"30f942ec","chunk-923796f6":"0bd251c1","chunk-a9e92636":"f093a7b4"}[e]+".css",n=o.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var l=i[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===n))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===a||u===n)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||n,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete s[e],m.parentNode.removeChild(m),r(i)},m.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){s[e]=0})));var a=n[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,r){a=n[e]=[t,r]}));t.push(a[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=c(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",d.name="ChunkLoadError",d.type=a,d.request=s,r[1](d)}n[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/Alphitter-Vue-api/",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"045e":function(e,t,r){"use strict";r("62b6")},"0bda":function(e,t,r){},"11ef":function(e,t,r){},"162f":function(e,t,r){"use strict";r("4ed0")},"187b":function(e,t,r){},"18c4":function(e,t,r){"use strict";r("c22d")},1919:function(e,t,r){"use strict";r("0bda")},"19a0":function(e,t,r){e.exports=r.p+"img/addPhoto.b828c231.svg"},"1a6f":function(e,t,r){"use strict";r("187b")},"1e56":function(e,t,r){},2091:function(e,t,r){"use strict";r("11ef")},2708:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("c1df"),s=r.n(a),n={filters:{fromNow:function(e){return e?s()(e).fromNow():"-"},postTime:function(e){return e?s()(e).format("lll"):"-"},chatTime:function(e){return e?s()(e).format("LT"):"-"}}}},"2b0f":function(e,t,r){e.exports=r.p+"img/comment-alt.20d8cd6a.svg"},"2fa3":function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var a=r("bc3a"),s=r.n(a),n=r("3d20"),i=r.n(n),c="https://serene-tor-37529.herokuapp.com/api",o=s.a.create({baseURL:c}),l=i.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),u=i.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3}),d=i.a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:2e3})},"2fc8":function(e,t,r){"use strict";r("8e32")},"355d":function(e,t,r){"use strict";r("4491")},3876:function(e,t,r){e.exports=r.p+"img/unSubscription.b0b235d3.svg"},4061:function(e,t,r){"use strict";r("6b3c")},4491:function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id="4678"},4711:function(e,t,r){e.exports=r.p+"img/crossWhite.206c5b7f.svg"},"47b4":function(e,t,r){},"4cce":function(e,t,r){"use strict";var a=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={getCurrentUser:function(){return a["d"].get("/users/currentUser",{headers:{Authorization:"Bearer ".concat(s())}})},getUser:function(e){return a["d"].get("/users/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweet:function(e){return a["d"].get("/users/".concat(e,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getTopUsers:function(){return a["d"].get("/users/top10Users",{headers:{Authorization:"Bearer ".concat(s())}})},editUserProfile:function(e){var t=e.currentUserId,r=e.formData;return a["d"].put("/users/".concat(t),r,{headers:{Authorization:"Bearer ".concat(s())}})},getUserFollowing:function(e){return a["d"].get("users/".concat(e,"/followings"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserFollower:function(e){return a["d"].get("users/".concat(e,"/followers"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserLikes:function(e){return a["d"].get("/users/".concat(e,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},getUserRepliedTweets:function(e){return a["d"].get("/users/".concat(e,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},createFollowship:function(e){var t=e.id;return a["d"].post("/followships",{id:t},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollowship:function(e){return a["d"].delete("/followships/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},getOtherUsers:function(){return a["d"].get("/users/other",{headers:{Authorization:"Bearer ".concat(s())}})}}},"4e93":function(e,t,r){e.exports=r.p+"img/subscription.843fff15.svg"},"4ed0":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"alphitter"}},[r("router-view")],1)},n=[],i=(r("7b17"),r("ab8b"),{name:"App"}),c=i,o=(r("034f"),r("2877")),l=Object(o["a"])(c,s,n,!1,null,null,null),u=l.exports,d=r("1da1"),m=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("caad"),r("b0c0"),r("2532"),r("8c4f")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",{staticClass:"not-found"},[e._v("404 Not Found")])},f=[],v=(r("4061"),{}),h=Object(o["a"])(v,p,f,!1,null,"dd15d636",null),w=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container d-flex flex-column align-items-center"},[e._m(0),r("form",{staticClass:"signin-data",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[e._m(1),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"account"}},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"account",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password"}},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"btn-wrapping"},[r("button",{staticClass:"btn mb-3 data-submit-btn",attrs:{disabled:e.isprocessing,type:"submit"}},[e._v(" 登入 ")])]),r("div",{staticClass:"text-center mb-3 otherOption"},[r("span",[r("router-link",{attrs:{to:"/signup"}},[e._v("註冊Alphitter")])],1),r("span",{staticClass:"mx-2"},[e._v(" • ")]),r("span",[r("router-link",{attrs:{to:"/admin/signin"}},[e._v("後台登入")])],1)])])])},g=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{attrs:{src:"https://avatars.githubusercontent.com/u/8667311?s=200&v=4",alt:""}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center mb-4"},[r("h1",{staticClass:"h3 mb-3 font-weight-normal data-title"},[e._v("登入Alphitter")])])}],C=r("2fa3"),k={signIn:function(e){var t=e.account,r=e.password;return C["d"].post("/signin",{account:t,password:r})},signUp:function(e){var t=e.account,r=e.name,a=e.email,s=e.password,n=e.checkPassword;return C["d"].post("/users",{account:t,name:r,email:a,password:s,checkPassword:n})},adminSignIn:function(e){var t=e.email,r=e.password;return C["d"].post("/admin/signin",{email:t,password:r})}},U={name:"SignIn",data:function(){return{account:"",password:"",isprocessing:!1}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.account&&e.password){t.next=4;break}return C["c"].fire({icon:"warning",title:"Oh，有空白～帳號和密碼都要寫唷>_<"}),t.abrupt("return");case 4:return e.isprocessing=!0,t.next=7,k.signIn({account:e.account,password:e.password});case 7:if(r=t.sent,a=r.data,"success"===a.status){t.next=11;break}throw new Error(a.message);case 11:localStorage.setItem("token",a.token),e.$store.commit("setCurrentUser",a.user),e.$router.push("/main"),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](0),e.isprocessing=!1,e.password="",C["c"].fire({icon:"error",title:"欸斗，帳號密碼可能打錯囉，再想想看>_<"});case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},x=U,j=(r("95b5"),Object(o["a"])(x,b,g,!1,null,"736bf853",null)),_=j.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container d-flex flex-column align-items-center"},[e._m(0),r("form",{staticClass:"signup-data",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[e._m(1),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"accountNumber"}},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-control",attrs:{id:"accountNumber",name:"account",type:"account",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"name"}},[e._v("名稱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",autocomplete:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password"}},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"current-password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password-check"}},[e._v("密碼確認")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.checkPassword,expression:"checkPassword"}],staticClass:"form-control",attrs:{id:"password-check",name:"checkPassword",type:"password",autocomplete:"new-password"},domProps:{value:e.checkPassword},on:{input:function(t){t.target.composing||(e.checkPassword=t.target.value)}}})]),r("div",{staticClass:"btn-wrapping"},[r("button",{staticClass:"btn mb-3 data-submit-btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 註冊 ")])]),r("div",{staticClass:"text-center mb-3 otherOption"},[r("span",[r("router-link",{staticClass:"cancel-btn",attrs:{to:{name:"sign-in"}}},[e._v("取消")])],1)])])])},O=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{attrs:{src:"https://avatars.githubusercontent.com/u/8667311?s=200&v=4",alt:""}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center mb-4"},[r("h1",{staticClass:"h3 mb-3 font-weight-normal data-title"},[e._v("建立你的帳號")])])}],R={name:"SignUp",data:function(){return{account:"",name:"",email:"",password:"",checkPassword:"",isProcessing:!1}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.account&&e.email&&e.password&&e.password&&e.checkPassword){t.next=4;break}return C["c"].fire({icon:"warning",title:"拜偷!!每一欄都要寫!!"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,k.signUp({account:e.account,name:e.name,email:e.email,password:e.password,checkPassword:e.checkPassword});case 7:if(r=t.sent,a=r.data,"success"===a.status){t.next=11;break}throw new Error(a.message);case 11:localStorage.setItem("token",a.token),e.$store.commit("setCurrentUser",a.user),C["c"].fire({icon:"success",title:"註冊成功!!歡迎歡迎～"}),e.$router.push("/signin"),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),e.isProcessing=!1,C["c"].fire({icon:"error",title:"拍謝，該帳號或email被註冊過啦，請換一個唄"});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}},A=R,T=(r("cb8f"),Object(o["a"])(A,y,O,!1,null,"0c08b74c",null)),P=T.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-xxl"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),r("div",{staticClass:"col-10 px-0"},[r("div",{staticClass:"title"},[e._v("帳戶設定")]),r("div",{staticClass:"col-12 col-lg-8 px-0 mid-col"},[r("form",{staticClass:"data-from",attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("div",{staticClass:"form-group user-data"},[r("label",{staticClass:"ms-2 fw-bold",attrs:{for:"account"}},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentUser.account,expression:"currentUser.account"}],staticClass:"form-control",attrs:{id:"account",type:"account",name:"account",autocomplete:"username",autofocus:"",required:""},domProps:{value:e.currentUser.account},on:{input:function(t){t.target.composing||e.$set(e.currentUser,"account",t.target.value)}}})]),r("div",{staticClass:"form-group user-data"},[r("label",{staticClass:"ms-2 fw-bold",attrs:{for:"name"}},[e._v("名稱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentUser.name,expression:"currentUser.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",autocomplete:"username",autofocus:"",required:""},domProps:{value:e.currentUser.name},on:{input:function(t){t.target.composing||e.$set(e.currentUser,"name",t.target.value)}}})]),r("div",{staticClass:"form-group user-data"},[r("label",{staticClass:"ms-2 fw-bold",attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.currentUser.email,expression:"currentUser.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",autocomplete:"email",required:""},domProps:{value:e.currentUser.email},on:{input:function(t){t.target.composing||e.$set(e.currentUser,"email",t.target.value)}}})]),r("div",{staticClass:"form-group user-data"},[r("label",{staticClass:"ms-2 fw-bold",attrs:{for:"password"}},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",autocomplete:"new-password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"form-group user-data"},[r("label",{staticClass:"ms-2 fw-bold",attrs:{for:"password-check"}},[e._v("密碼確認")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.checkPassword,expression:"checkPassword"}],staticClass:"form-control",attrs:{id:"password-check",type:"password",name:"checkPassword",autocomplete:"new-password-check"},domProps:{value:e.checkPassword},on:{input:function(t){t.target.composing||(e.checkPassword=t.target.value)}}})]),r("div",{staticClass:"data-footer d-flex flex-row-reverse"},[r("button",{staticClass:"btn mb-3",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 儲存 ")])])])])])])])},S=[],$=r("5530"),E=r("4cce"),F=r("5ea5"),I={components:{Sidebar:F["a"]},data:function(){return{currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[]},password:"",checkPassword:"",active:{setting:"active"},isProcessing:!1}},created:function(){this.fetchCurrentUser()},methods:{fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,console.log("currentUser:",r),e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleSubmit:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.isProcessing=!0,console.log(e.target),t.password===t.checkPassword){r.next=7;break}return C["c"].fire({icon:"error",title:"密碼要打一樣唷～"}),t.isProcessing=!1,r.abrupt("return");case 7:return a=e.target,s=new FormData(a),n=t.currentUser.id,console.log(n),r.next=13,E["a"].editUserProfile({currentUserId:n,formData:s});case 13:i=r.sent,console.log(i),C["a"].fire({icon:"success",title:"更新完成"}),t.fetchCurrentUser(),t.isProcessing=!1,r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"欸斗，現在不能修改資料，等一下嘿～"});case 23:case"end":return r.stop()}}),r,null,[[0,20]])})))()}}},N=I,z=(r("1919"),Object(o["a"])(N,L,S,!1,null,"08259810",null)),B=z.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container d-flex flex-column align-items-center"},[e._m(0),r("form",{staticClass:"signin-data",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[e._m(1),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"email"}},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password"}},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"btn-wrapping"},[r("button",{staticClass:"btn data-submit-btn mb-3",attrs:{type:"submit",disabled:e.isprocessing}},[e._v(" 登入 ")])]),r("div",{staticClass:"text-center mb-3 otherOption"},[r("span",[r("router-link",{attrs:{to:"/signin"}},[e._v("前台登入")])],1)])])])},H=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{attrs:{src:"https://avatars.githubusercontent.com/u/8667311?s=200&v=4",alt:""}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center mb-4"},[r("h1",{staticClass:"h3 mb-3 font-weight-normal data-title"},[e._v("後台登入")])])}],q={name:"AdminSignIn",data:function(){return{email:"",password:"",isprocessing:!1}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=4;break}return C["c"].fire({icon:"warning",title:"Oh，有空白～信箱和密碼都要寫唷>_<"}),t.abrupt("return");case 4:return e.isprocessing=!0,t.next=7,k.adminSignIn({email:e.email,password:e.password});case 7:if(r=t.sent,a=r.data,"success"===a.status){t.next=11;break}throw new Error(a.message);case 11:localStorage.setItem("token",a.token),e.$store.commit("setCurrentAdminUser",a.user),e.$router.push("/admin/twitter"),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](0),e.isprocessing=!1,e.password="",C["c"].fire({icon:"error",title:"欸斗，現在無法登入，待會再試唄"});case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},M=q,G=(r("aeae"),Object(o["a"])(M,D,H,!1,null,"309126d2",null)),J=G.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-xxl"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),r("div",{staticClass:"row col-10 px-0"},[r("div",{staticClass:"col-12 col-lg-8 px-0 mid-col"},[r("div",{staticClass:"twitterEditCard"},[r("div",{staticClass:"mid-header"},[e._v("首頁")]),r("form",{staticClass:"m-3",attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("div",{staticClass:"d-flex justify-content-start"},[r("div",{staticClass:"avatar-wrapping p-0 mx-2 col-2"},[r("img",{staticClass:"avatar-img",attrs:{src:e.currentUser.avatar,alt:""}})]),r("div",{staticClass:"textarea col-10"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{placeholder:"有甚麼新鮮事?",id:"floatingTextarea2",rows:"2"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])])]),r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn btn-secondary tweet",attrs:{type:"submit"},on:{click:e.newTweetSubmit}},[e._v(" 推文 ")])]),r("div",{staticClass:"divider"})]),r("div",{staticClass:"mid-down"},[r("twitterCardTable",{attrs:{tweets:e.tweets,currentUser:e.currentUser},on:{"handle-be-like":e.afterHandleBeLike,"handle-unlike":e.afterHandleUnlike}})],1)]),r("div",{staticClass:"col-4 d-none d-lg-block right-col"},[r("RecommendationTable",{attrs:{"initial-recommend-users":e.recommendUsers}})],1)])])])},V=[],W=r("2909"),Q=(r("a4d3"),r("e01a"),r("498a"),r("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comtainer"},[e._l(e.tweets,(function(t){return a("div",{key:t.id,staticClass:"row tweet-row m-0"},[a("div",{staticClass:"col-6 tweet-user-image-wrapping justify-content-start"},[a("img",{staticClass:"tweet-user-image",attrs:{src:t.User.avatar,alt:""},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.usersPage(t.UserId)}}})]),a("div",{staticClass:"col-10 tweet-content"},[a("span",[a("span",{staticClass:"tweet-user-name",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.usersPage(t.UserId)}}},[e._v(" "+e._s(t.User?t.User.name:"未顯示")+" ")]),a("span",{staticClass:"tweet-info"},[e._v(" @ "+e._s(t.User?t.User.account:"未顯示")+" • "+e._s(e._f("fromNow")(t.createdAt))+" ")])]),a("p",{staticClass:"tweet-description m-0",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.tweetReply(t.id)}}},[e._v(" "+e._s(t.description)+" ")]),a("div",{staticClass:"responseIcon my-2"},[a("span",{staticClass:"comment",attrs:{"data-bs-toggle":"modal","data-bs-target":"#replyTweet"}},[a("img",{staticClass:"mx-2 icon",attrs:{src:r("2b0f"),alt:"討論icon"},on:{click:function(r){return e.importReplyData(t.id)}}}),a("span",{staticClass:"tweet-info me-5"},[e._v(e._s(t.ReplyCount))])]),a("span",{staticClass:"heart"},[t.isLike?a("img",{staticClass:"mx-2 icon",attrs:{src:r("b074"),alt:"喜愛icon"},on:{click:function(r){return e.unLiked(t.id)}}}):a("img",{staticClass:"mx-2 icon",attrs:{src:r("fbe8"),alt:"喜愛icon"},on:{click:function(r){return e.beLiked(t.id)}}}),t.isLike?a("span",{staticClass:"tweet-info heart-color"},[e._v(e._s(t.likeCount))]):a("span",{staticClass:"tweet-info"},[e._v(e._s(t.likeCount))])])])])])})),a("div",{staticClass:"modal fade",attrs:{id:"replyTweet",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[e._m(0),a("div",{staticClass:"modal-body pb-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"tweetImage-cut"},[a("img",{staticClass:"tweetImage",attrs:{src:e.replyOnwerAvatar,alt:""}})])]),a("div",{staticClass:"col-10 replyContent"},[a("span",[a("span",{staticClass:"tweet-user-name"},[e._v(" "+e._s(e.replyOnwer)+" ")]),a("span",{staticClass:"tweet-info"},[e._v(" @ "+e._s(e.replyOnwerAccount)+" • "+e._s(e._f("fromNow")(e.replyCreatedAt))+" ")])]),a("p",{staticClass:"mt-1"},[e._v(e._s(e.replyDescription))])])])]),a("div",{staticClass:"modal-body"},[e._l(e.tweetReplies,(function(t){return a("div",{key:t.id,staticClass:"row"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"tweetImage-cut"},[a("img",{staticClass:"tweetImage",attrs:{src:t.User.avatar,alt:""}})])]),a("div",{staticClass:"col-10 replyContent"},[a("span",[a("span",{staticClass:"tweet-user-name"},[e._v(" "+e._s(t.User.name)+" ")]),a("span",{staticClass:"tweet-info"},[e._v(" @ "+e._s(t.User.account)+" • "+e._s(e._f("fromNow")(t.createdAt))+" ")])]),a("p",{staticClass:"mt-1"},[e._v(e._s(t.comment))]),a("p",[a("span",{staticClass:"tweet-info"},[e._v("回覆給")]),a("span",{staticClass:"owner-user"},[e._v("@"+e._s(e.replyOnwer))])])])])})),a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"tweetImage-cut"},[a("img",{staticClass:"tweetImage",attrs:{src:e.currentUser.avatar,alt:"推文擁有者"}})])]),a("div",{staticClass:"col-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentReply,expression:"currentReply"}],staticClass:"modal-reply-post",attrs:{rows:"6",cols:"46",placeholder:"推你的回覆"},domProps:{value:e.currentReply},on:{input:function(t){t.target.composing||(e.currentReply=t.target.value)}}})])])],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn tweet-reply",attrs:{type:"submit"},on:{click:function(t){return e.replyTweetSubmit({tweetId:e.tweetId,currentReply:e.currentReply})}}},[e._v(" 回覆 ")])])])])])],2)}),X=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("div",{staticClass:"modal-title"},[r("div",{staticClass:"close-btn",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])])}],Y=r("2708"),Z=r("6783"),ee={mixins:[Y["a"]],props:{tweets:{type:Array,require:!0},currentUser:{type:Object,required:!0}},data:function(){return{tweetId:"",tweetReplies:[],replyOnwer:"",replyOnwerAvatar:"",replyOnwerAccount:"",replyCreatedAt:"",replyDescription:"",currentReply:"",presetUserAvatat:"./../assets/addPhoto.svg"}},methods:{tweetReply:function(e){this.$router.push("/tweets/".concat(e))},usersPage:function(e){e===this.currentUser.id?this.$router.push({name:"user-self"}):this.$router.push("/user/".concat(e))},replyTweetSubmit:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.tweetId,s=e.currentReply,r.prev=1,t.currentReply){r.next=7;break}return C["a"].fire({icon:"error",title:"請填寫推文內容"}),r.abrupt("return");case 7:if(!(t.currentReply.length>140)){r.next=10;break}return C["a"].fire({icon:"error",title:"請勿超過140字數，目前"+t.currentReply.length+"字"}),r.abrupt("return");case 10:return r.next=12,Z["a"].replyTweet({tweetId:a,comment:s});case 12:if(n=r.sent,"success"===n.data.status){r.next=15;break}throw new Error(n.data.message);case 15:C["a"].fire({icon:"success",title:"回覆成功，enjoy!!"}),console.log(n),setTimeout("location.reload()",2200),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](1),C["c"].fire({icon:"error",title:"請填寫回覆內容"});case 23:case"end":return r.stop()}}),r,null,[[1,20]])})))()},beLiked:function(e){console.log("beLiked-tweetId",e),this.$emit("handle-be-like",e)},unLiked:function(e){console.log("uniked-tweetId",e),this.$emit("handle-unlike",e)},importReplyData:function(e){var t=this;this.replyOnwer="",this.tweetReplies=[],this.currentReply="",this.tweets.map((function(r){r.id===e&&(t.tweetReplies=Object(W["a"])(r.Replies),t.replyOnwer=r.User.name,t.replyOnwerAccount=r.User.account,t.replyOnwerAvatar=r.User.avatar,t.replyCreatedAt=r.updatedAt,t.replyDescription=r.description,t.tweetId=r.id)}))}}},te=ee,re=(r("18c4"),Object(o["a"])(te,Q,X,!1,null,"a43ae396",null)),ae=re.exports,se=r("eea9"),ne={name:"TweetMain",components:{Sidebar:F["a"],twitterCardTable:ae,RecommendationTable:se["a"]},data:function(){return{description:"",tweets:[],active:{home:"active"},currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[]},recommendUsers:[]}},created:function(){this.fetchMain(),this.fetchCurrentUser(),this.fetchRecommendUsers()},methods:{newTweetSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.description=e.description.trim(),e.description.length){t.next=7;break}return C["a"].fire({icon:"error",title:"請輸入正確內容"}),t.abrupt("return");case 7:if(!(e.description.length>140)){t.next=10;break}return C["a"].fire({icon:"error",title:"請勿超過140字數，目前"+e.description.length+"字"}),t.abrupt("return");case 10:return r=e.description,t.next=13,Z["a"].postTweet({description:r});case 13:a=t.sent,console.log("post tweet:",a),C["a"].fire({icon:"success",title:"發文成功，enjoy!!"}),setTimeout("location.reload()",2200),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),C["a"].fire({icon:"error",title:"目前無法新增推文，請稍後再試～"});case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()},afterHandleBeLike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsLike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!0,likeCount:r+1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterHandleUnlike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsUnlike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!1,likeCount:r-1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法取消取消喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchMain:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z["a"].getTweets();case 3:r=t.sent,e.tweets=r.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.description||C["c"].fire({icon:"error",title:"請填寫推文內容"}),e.description.length>=140&&C["c"].fire({icon:"error",title:"字數限制140字，現已輸入了".concat(r.length,"字")}),r=e.description,t.next=6,Z["a"].postTweet({description:r});case 6:a=t.sent,console.log("post tweet:",a),e.fetchMain(),e.description="",t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"現在無法推文捏，請稍後再試～"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},fetchRecommendUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getTopUsers();case 3:r=t.sent,console.log("fetchRecommendUsers",r),e.recommendUsers=Object(W["a"])(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得推薦資料，請稍後再試"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ie=ne,ce=(r("de19"),Object(o["a"])(ie,K,V,!1,null,"04b5fccf",null)),oe=ce.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-xxl"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),a("div",{staticClass:"row col-10 px-0"},[a("div",{staticClass:"col-12 col-lg-8 px-0 mid-col"},[a("div",{staticClass:"mid-header row arrow"},[a("div",{staticClass:"col-1"},[a("font-awesome-icon",{attrs:{icon:"arrow-left"},on:{click:function(t){return e.$router.back()}}})],1),e._m(0)]),a("div",{staticClass:"twitterCard"},[a("div",{staticClass:"name"},[a("div",{staticClass:"avatar-cut"},[a("img",{staticClass:"avatar",attrs:{src:e.tweet.User?e.tweet.User.avatar:"",alt:"使用者大頭貼"}})]),a("span",{staticClass:"name-text"},[a("span",{staticClass:"tweet-name"},[e._v(e._s(e.tweet.User?e.tweet.User.name:"未顯示"))]),a("span",{staticClass:"tweet-accoun"},[e._v("@"+e._s(e.tweet.User?e.tweet.User.account:"未顯示"))])])]),a("div",{staticClass:"text my-3"},[a("div",[e._v(" "+e._s(e.tweet.description)+" ")]),a("div",{staticClass:"pt-3 post-time"},[e._v(e._s(e._f("postTime")(e.tweet.createdAt)))])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"response py-2"},[a("span",{staticClass:"response-comment"},[e._v(" "+e._s(e.repliesLength?e.repliesLength:"0"))]),e._v("回覆 "),a("span",{staticClass:"response-be-like"},[e._v(" "+e._s(e.likeCount?e.likeCount:"0")+" ")]),e._v("喜歡次數 ")]),a("div",{staticClass:"divider"}),a("div",{staticClass:"responseIcon pt-2"},[a("span",{staticClass:"pe-5 comment",attrs:{"data-bs-toggle":"modal","data-bs-target":"#replyTweet"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.sendTweetId(e.tweet.id)}}},[a("img",{attrs:{src:r("2b0f"),alt:""}})]),a("span",{staticClass:"ps-5 heart"},[e.tweet.isLike?a("img",{staticClass:"mx-2 icon",attrs:{src:r("b074"),alt:"喜愛icon"},on:{click:function(t){return e.unLiked(e.tweet.id)}}}):a("img",{staticClass:"mx-2 icon",attrs:{src:r("fbe8"),alt:"喜愛icon"},on:{click:function(t){return e.beLiked(e.tweet.id)}}})])])]),a("div",{staticClass:"twitterReplies"},e._l(e.replies,(function(t){return a("div",{key:t.id,staticClass:"row tweetReply"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"avatar-cut"},[a("img",{attrs:{src:e.currentUser.avatar,alt:""}})])]),a("div",{staticClass:"col-10 ps-4"},[a("p",[a("span",{staticClass:"reply-name"},[e._v(" "+e._s(e.currentUser.name))]),a("span",{staticClass:"reply-info"},[e._v("@ "+e._s(e.currentUser.account)+" • "+e._s(e._f("fromNow")(t.createdAt)))])]),a("p",{staticClass:"reply-info"},[e._v(" 回覆"),a("span",{staticClass:"user-reply-anme"},[e._v("@"+e._s(e.tweet.User.name))])]),a("p",[e._v(e._s(t.comment))])])])})),0)]),a("div",{staticClass:"col-4 d-none d-lg-block right-col"},[a("RecommendationTable",{attrs:{"initial-recommend-users":e.recommendUsers}})],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"replyTweet",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[e._m(1),a("div",{staticClass:"modal-body"},[e._l(e.replies,(function(t){return a("div",{key:t.id,staticClass:"row"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"tweetImage-cut"},[a("img",{staticClass:"tweetImage",attrs:{src:e.currentUser.avatar,alt:""}})])]),a("div",{staticClass:"col-10 replyContent"},[a("span",[a("span",{staticClass:"tweet-user-name"},[e._v(" "+e._s(e.currentUser.name)+" ")]),a("span",{staticClass:"tweet-info"},[e._v(" @ "+e._s(e.currentUser.account)+" • "+e._s(e._f("fromNow")(t.createdAt))+" ")])]),a("p",{staticClass:"mt-1"},[e._v(e._s(t.comment))]),a("p",[a("span",{staticClass:"tweet-info"},[e._v("回覆給")]),a("span",{staticClass:"owner-user"},[e._v("@"+e._s(e.tweet.User.name))])])])])})),a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"tweetImage-cut"},[a("img",{staticClass:"tweetImage",attrs:{src:e.currentUser.avatar,alt:"推文擁有者"}})])]),a("div",{staticClass:"col-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentReply,expression:"currentReply"}],staticClass:"modal-reply-post",attrs:{rows:"6",cols:"46",placeholder:"推你的回覆"},domProps:{value:e.currentReply},on:{input:function(t){t.target.composing||(e.currentReply=t.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn tweet-reply",attrs:{type:"submit"},on:{click:function(t){return e.replyTweetSubmit({tweetId:e.tweetId,currentReply:e.currentReply})}}},[e._v(" 回覆 ")])])],2)])])])])},ue=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-10"},[r("span",[e._v("推文")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("div",{staticClass:"modal-title"},[r("div",{staticClass:"close-btn",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])])}],de={name:"TweetReplyList",mixins:[Y["a"]],components:{Sidebar:F["a"],RecommendationTable:se["a"]},data:function(){return{tweet:{},tweetId:"",likeCount:"",repliesLength:"",replies:[],active:{},currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[],Likes:[],tweetCount:""},recommendUsers:[],currentReply:""}},created:function(){var e=this.$route.params.id;this.fetchTweet(e),this.fetchCurrentUser(),this.fetchRecommendUsers()},methods:{fetchTweet:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].getSingleTweet(e);case 3:a=r.sent,t.tweet=a.data,t.replies=a.data.Replies,t.likeCount=t.tweet.Likes.length,t.repliesLength=t.tweet.Replies.length,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchRecommendUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getTopUsers();case 3:r=t.sent,e.recommendUsers=Object(W["a"])(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得推薦資料，請稍後再試"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},beLiked:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsLike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweet.isLike=!0,t.likeCount+=1,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法喜歡這則推文，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},unLiked:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("uniked-tweetId",e),r.prev=1,r.next=4,Z["a"].postTweetsUnlike(e);case 4:if(a=r.sent,s=a.data,"success"===s.status){r.next=8;break}throw new Error(s.message);case 8:t.tweet.isLike=!1,t.likeCount-=1,r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),C["c"].fire({icon:"error",title:"無法取消喜歡這則推文，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},sendTweetId:function(e){this.tweetId=e},replyTweetSubmit:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.tweetId,s=e.currentReply,r.prev=1,t.currentReply||C["c"].fire({icon:"error",title:"請填寫推文內容"}),r.next=5,Z["a"].replyTweet({tweetId:a,comment:s});case 5:if(n=r.sent,"success"===n.data.status){r.next=8;break}throw new Error(n.data.message);case 8:console.log(n),setTimeout("location.reload()",2200),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),C["c"].fire({icon:"error",title:"請填寫回覆內容"});case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()}}},me=de,pe=(r("a409"),Object(o["a"])(me,le,ue,!1,null,"68b7c2ce",null)),fe=pe.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-xxl"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),r("div",{staticClass:"row col-10 px-0"},[r("div",{staticClass:"col-12 col-lg-8 px-0 mid-col"},[r("UserNavbar",{attrs:{currentUser:e.currentUser}}),r("div",{staticClass:"user-profile"},[r("UserProfile",{attrs:{initialCurrentUser:e.currentUser}})],1),r("Tab",{attrs:{"tab-active":e.tabActive},on:{"handle-change-active":e.afterHadleChangeActive}}),r("div",{staticClass:"mid-down"},[r("twitterCardTable",{attrs:{tweets:e.tweets,currentUser:e.currentUser},on:{"handle-be-like":e.afterHandleBeLike,"handle-unlike":e.afterHandleUnlike}})],1)],1),r("div",{staticClass:"col-4 d-none d-lg-block right-col"},[r("RecommendationTable",{attrs:{"initial-recommend-users":e.recommendUsers},on:{"after-click-follow":e.afterClickFollow}})],1)])])])},he=[],we=r("d839"),be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container user-profile px-0"},[a("div",{staticClass:"user-title-cut"},[e.currentUser.cover?a("img",{staticClass:"user-title-pic",attrs:{src:e.currentUser.cover,alt:"使用者標題照片"}}):e._e()]),a("div",{staticClass:"avatar"},[e.currentUser.avatar?a("img",{staticClass:"avatar-img",attrs:{src:e.currentUser.avatar,alt:"使用者大頭貼"}}):e._e()]),a("div",{staticClass:"information"},[e._m(0),a("div",{staticClass:"name-text"},[a("span",{staticClass:"name-content"},[e._v(e._s(e.currentUser.name))]),a("span",{staticClass:"name-account"},[e._v("@"+e._s(e.currentUser.account))]),a("div",{staticClass:"mt-3 user-introduction"},[e._v(" "+e._s(e.currentUser.introduction)+" ")]),a("div",{staticClass:"follow mt-2"},[a("router-link",{staticClass:"followers-content",attrs:{to:{path:"/user/"+e.currentUser.id+"/followings"}}},[a("span",{staticClass:"bold"},[e._v(e._s(e.currentUser.Followings.length)+"個")]),a("span",{staticClass:"gray"},[e._v("跟隨中")])]),a("router-link",{staticClass:"following-content ms-2",attrs:{to:{path:"/user/"+e.currentUser.id+"/followers"}}},[a("span",{staticClass:"bold"},[e._v(e._s(e.currentUser.Followers.length)+"位")]),a("span",{staticClass:"gray"},[e._v("跟隨者")])])],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"close-btn",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}),e._m(1),a("div",{staticClass:"save-btn"},[e.isProcess?a("button",{staticClass:"save-btn",attrs:{type:"submit",disabled:"disabled"}},[e._v(" 更新中... ")]):a("button",{staticClass:"save-btn"},[e._v("儲存")])])]),a("div",{staticClass:"modal-body p-0 form-group"},[a("div",{staticClass:"user-title-cut"},[e.currentUser.cover?a("img",{staticClass:"user-title-pic",attrs:{src:e.currentUser.cover,alt:"使用者標題照片"}}):e._e(),a("label",{staticClass:"add-photo-btn"},[a("input",{staticClass:"form-control-file",staticStyle:{display:"none"},attrs:{id:"editCoverImage",type:"file",name:"cover",accept:"image/*"},on:{change:e.handleCoverChange}}),a("img",{attrs:{src:r("19a0"),alt:"新增/修改照片",title:"修改照片"}})]),e._m(2)]),a("div",{staticClass:"modal-avatar"},[e.currentUser.avatar?a("img",{staticClass:"modal-avatar-img",attrs:{src:e.currentUser.avatar,alt:"使用者大頭貼"}}):e._e(),a("label",{staticClass:"chang-photo-btn"},[a("input",{staticClass:"form-control-file",staticStyle:{display:"none"},attrs:{id:"editAvatarImage",type:"file",name:"avatar",accept:"image/*"},on:{change:e.handleAvatarChange}}),a("img",{attrs:{src:r("19a0"),alt:"新增/修改使用者大頭貼",title:"修改大頭貼"}})])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group input-data name-data"},[a("label",{staticClass:"ms-2 fw-bold",attrs:{for:"name"}},[e._v("名稱")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentUser.name,expression:"currentUser.name"}],staticClass:"form-control",attrs:{id:"name",name:"name",rows:"1",required:""},domProps:{value:e.currentUser.name},on:{input:function(t){t.target.composing||e.$set(e.currentUser,"name",t.target.value)}}})]),a("div",{staticClass:"form-group input-data introduction-data"},[a("label",{staticClass:"ms-3 fw-bold",attrs:{for:"introduction"}},[e._v("自我介紹")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentUser.introduction,expression:"currentUser.introduction"}],staticClass:"form-control",attrs:{id:"introduction",rows:"3",name:"introduction"},domProps:{value:e.currentUser.introduction},on:{input:function(t){t.target.composing||e.$set(e.currentUser,"introduction",t.target.value)}}})])])])])])])])},ge=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit d-flex flex-row-reverse"},[r("button",{staticClass:"btn edit-button",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#editModal"}},[e._v(" 編輯個人資料 ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[r("span",{staticClass:"title-content"},[e._v("編輯個人資料")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delete-photo-btn"},[a("img",{attrs:{src:r("4711"),alt:"刪除照片",title:"刪除照片"}})])}],Ce=r("3835"),ke=r("b85c"),Ue=(r("2b3d"),{name:"UserProfile",props:{initialCurrentUser:{type:Object,required:!0}},data:function(){return{currentUser:this.initialCurrentUser,isProcess:!1}},watch:{initialCurrentUser:function(e){this.currentUser=Object($["a"])(Object($["a"])({},this.currentUser),e)}},methods:{fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleCoverChange:function(e){var t=e.target.files;if(0===t.length)this.currentUser.cover="";else{var r=window.URL.createObjectURL(t[0]);this.currentUser.cover=r}},handleAvatarChange:function(e){var t=e.target.files;if(0===t.length)this.currentUser.avatar="";else{var r=window.URL.createObjectURL(t[0]);this.currentUser.avatar=r}},handleSubmit:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s,n,i,c,o,l,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.isProcess=!0,r.prev=1,a=e.target,s=new FormData(a),n=Object(ke["a"])(s.entries());try{for(n.s();!(i=n.n()).done;)c=Object(Ce["a"])(i.value,2),o=c[0],l=c[1],console.log(o+":"+l)}catch(m){n.e(m)}finally{n.f()}return u=t.currentUser.id,console.log(u),r.next=10,E["a"].editUserProfile({currentUserId:u,formData:s});case 10:if(d=r.sent,"success"===d.data.status){r.next=13;break}throw new Error(d.data.message);case 13:C["b"].fire({icon:"success",title:"更新完成"}),window.setTimeout((function(){location.reload()}),2e3),t.fetchCurrentUser(),r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](1),C["c"].fire({icon:"error",title:"欸斗，修改失敗，請稍後再試～"});case 21:case"end":return r.stop()}}),r,null,[[1,18]])})))()}}}),xe=Ue,je=(r("f7b6"),Object(o["a"])(xe,be,ge,!1,null,"1a50a449",null)),_e=je.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tab mt-5"},[r("div",{staticClass:"wrapping d-flex"},[r("div",{staticClass:"tab-link",class:e.tabActive.tweetsArea,on:{click:function(t){return e.changActive("tweetsArea")}}},[e._v(" 推文 ")]),r("div",{staticClass:"tab-link",class:e.tabActive.replyTweestArea,on:{click:function(t){return e.changActive("replyTweestArea")}}},[e._v(" 推文與回覆 ")]),r("div",{staticClass:"tab-link",class:e.tabActive.liekdArea,on:{click:function(t){return e.changActive("liekdArea")}}},[e._v(" 喜歡的內容 ")])])])},Oe=[],Re={name:"Tab",props:{tabActive:{type:Object,required:!0}},methods:{changActive:function(e){this.$emit("handle-change-active",e)}}},Ae=Re,Te=(r("2091"),Object(o["a"])(Ae,ye,Oe,!1,null,"4d0605d8",null)),Pe=Te.exports,Le={name:"Userself",components:{Sidebar:F["a"],twitterCardTable:ae,UserNavbar:we["a"],UserProfile:_e,Tab:Pe,RecommendationTable:se["a"]},data:function(){return{tweets:[],active:{self:"active"},tabActive:{tweetsArea:"active",replyTweestArea:"",liekdArea:""},currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[],Likes:[],tweetCount:""},recommendUsers:[]}},created:function(){this.fetchRecommendUsers(),this.fetchCurrentUser()},methods:{afterHandleBeLike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsLike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!0,likeCount:r+1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterHandleUnlike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsUnlike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!1,likeCount:r-1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法取消取消喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),e.fetchUserself(e.currentUser.id),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},fetchUserself:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserTweet(e);case 3:a=r.sent,t.tweets=a.data,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的資料，請稍後再試唷"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchUserLike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserLikes(e);case 3:a=r.sent,t.tweets=a.data,t.afterGetLike(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的喜歡資料，請稍後再試唷"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUserRepliedTweets:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserRepliedTweets(e);case 3:a=r.sent,t.tweets=a.data,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的推文回復資料，請稍後再試唷"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchRecommendUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getTopUsers();case 3:r=t.sent,e.recommendUsers=Object(W["a"])(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得推薦資料，請稍後再試"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},afterClickFollow:function(){this.fetchCurrentUser()},afterHadleChangeActive:function(e){switch(this.tabActive={tweetsArea:"",replyTweestArea:"",liekdArea:""},e){case"tweetsArea":this.tabActive.tweetsArea="active",this.fetchUserself(this.currentUser.id);break;case"replyTweestArea":this.tabActive.replyTweestArea="active",this.fetchUserRepliedTweets(this.currentUser.id);break;case"liekdArea":this.tabActive.liekdArea="active",this.fetchUserLike(this.currentUser.id);break}},afterGetLike:function(){var e=this.tweets.map((function(e){return e.Tweet.isLike=e.isLike,e.Tweet.ReplyCount=e.ReplyCount,e.Tweet.likeCount=e.likeCount,e.Tweet}));this.tweets=e}}},Se=Le,$e=(r("6ed0"),Object(o["a"])(Se,ve,he,!1,null,"6b2085c8",null)),Ee=$e.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-xxl"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),r("div",{staticClass:"row col-10 px-0"},[r("div",{staticClass:"col-12 col-lg-8 px-0 mid-col"},[r("UserNavbar",{attrs:{currentUser:e.otherUser},on:{"handle-change-active":e.afterHadleChangeActive}}),r("div",{staticClass:"user-profile"},[r("UserOtherProfile",{attrs:{otherUser:e.otherUser},on:{"handle-follow":e.afterHandleFollow,"handle-unfollow":e.afterHandleUnfollow,"handle-subscription":e.afterhandleSubscription,"handle-unsubscription":e.afterhandleUnSubscription,"after-click-follow":e.afterClickFollow}})],1),r("Tab",{attrs:{"tab-active":e.tabActive},on:{"handle-change-active":e.afterHadleChangeActive}}),r("div",{staticClass:"mid-down"},[r("twitterCardTable",{attrs:{tweets:e.tweets,currentUser:e.currentUser},on:{"handle-be-like":e.afterHandleBeLike,"handle-unlike":e.afterHandleUnlike}})],1)],1),r("div",{staticClass:"col-4 d-none d-lg-block right-col"},[r("RecommendationTable",{attrs:{"initial-recommend-users":e.recommendUsers},on:{"after-click-follow":e.afterClickFollow}})],1)])])])},Ie=[],Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container user-profile px-0"},[a("div",{staticClass:"user-title-cut"},[e.otherUser.cover?a("img",{staticClass:"user-title-pic",attrs:{src:e.otherUser.cover,alt:"使用者標題照片"}}):e._e()]),a("div",{staticClass:"avatar"},[e.otherUser.avatar?a("img",{staticClass:"avatar-img",attrs:{src:e.otherUser.avatar,alt:"使用者大頭貼"}}):e._e()]),a("div",{staticClass:"information"},[a("div",{staticClass:"d-flex justify-content-end"},[e._m(0),e.otherUser.isSubscription?a("button",{staticClass:"btn unSubscription-button-wrapping",attrs:{type:"button"},on:{click:e.handleUnSubscription}},[a("img",{staticClass:"subscription-button",attrs:{src:r("3876"),alt:""}})]):a("button",{staticClass:"btn subscription-button-wrapping",attrs:{type:"button"},on:{click:e.handleSubscription}},[a("img",{staticClass:"unSubscription-button",attrs:{src:r("4e93"),alt:""}})]),e.otherUser.isFollowed?a("button",{staticClass:"btn unfollowing-button",attrs:{type:"button"},on:{click:[e.handleUnFollow,function(t){return t.stopPropagation(),t.preventDefault(),e.unFollow(e.otherUser.id)}]}},[e._v(" 正在跟隨 ")]):a("button",{staticClass:"btn following-button",attrs:{type:"button"},on:{click:[e.handleFollow,function(t){return t.stopPropagation(),t.preventDefault(),e.Follow(e.otherUser.id)}]}},[e._v(" 跟隨 ")])]),a("div",{staticClass:"name-text"},[a("span",{staticClass:"name-content"},[e._v(e._s(e.otherUser.name))]),a("span",{staticClass:"name-account"},[e._v("@"+e._s(e.otherUser.account))]),a("div",{staticClass:"mt-3"},[e._v(" "+e._s(e.otherUser.introduction)+" ")]),a("div",{staticClass:"follow mt-2"},[a("router-link",{staticClass:"followings-content",attrs:{to:{name:"user-following"}}},[a("span",{staticClass:"bold"},[e._v(e._s(e.otherUser.Followings?e.otherUser.Followings.length:"")+"個")]),a("span",{staticClass:"gray"},[e._v("跟隨中")])]),a("router-link",{staticClass:"followers-content ms-2",attrs:{to:{name:"user-follower"}}},[a("span",{staticClass:"bold"},[e._v(e._s(e.otherUser.Followers?e.otherUser.Followers.length:"")+"位")]),a("span",{staticClass:"gray"},[e._v("跟隨者")])])],1)])])])},ze=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn message-button-wrapping",attrs:{type:"button"}},[a("img",{staticClass:"message-button",attrs:{src:r("f3c4"),alt:""}})])}],Be={name:"UserOtherProfile",props:{otherUser:{type:Object,required:!0}},methods:{handleFollow:function(){this.$emit("handle-follow")},handleUnFollow:function(){this.$emit("handle-unfollow")},handleSubscription:function(){this.$emit("handle-subscription")},handleUnSubscription:function(){this.$emit("handle-unsubscription")},unFollow:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].deleteFollowship(e);case 3:if(a=r.sent,"success"===a.data.status){r.next=6;break}throw new Error(a.data.message);case 6:t.$emit("after-click-follow"),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"現在無法追蹤該使用者，請稍後再試～"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},Follow:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].createFollowship({id:e});case 3:if(a=r.sent,"success"===a.data.status){r.next=6;break}throw new Error(a.data.message);case 6:t.$emit("after-click-follow"),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"現在無法追蹤該使用者，請稍後再試～"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}},De=Be,He=(r("c317"),Object(o["a"])(De,Ne,ze,!1,null,"0d04d7d6",null)),qe=He.exports,Me={name:"UserOther",components:{Sidebar:F["a"],twitterCardTable:ae,UserNavbar:we["a"],UserOtherProfile:qe,Tab:Pe,RecommendationTable:se["a"]},data:function(){return{tweets:[],active:{},tabActive:{tweetsArea:"active",replyTweestArea:"",liekdArea:""},currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[],Likes:[],tweetCount:""},otherUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",isFollowed:"",isSubscription:"",Followers:[],Followings:[],Likes:[],tweetCount:""},recommendUsers:[]}},created:function(){var e=this.$route.params.id;this.fetchCurrentUser(),this.fetchOtherUser(e),this.fetchOtherUserTweets(e),this.fetchRecommendUsers()},methods:{afterHandleBeLike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsLike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!0,likeCount:r+1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterHandleUnlike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Z["a"].postTweetsUnlike(e);case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweets=t.tweets.map((function(t){if(t.id===e){var r=t.likeCount;return Object($["a"])(Object($["a"])({},t),{},{isLike:!1,likeCount:r-1})}return t})),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),C["c"].fire({icon:"error",title:"目前無法取消取消喜歡，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchOtherUser:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUser(e);case 3:a=r.sent,t.otherUser=a.data,console.log("this.otherUser",t.otherUser),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"現在無法看見該使用者資訊，待會再試～"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchOtherUserTweets:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserTweet(e);case 3:a=r.sent,t.tweets=a.data,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的資料，請稍後再試唷"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchUserLike:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserLikes(e);case 3:a=r.sent,t.tweets=a.data,t.afterGetLike(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的喜歡資料，請稍後再試唷"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUserRepliedTweets:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getUserRepliedTweets(e);case 3:a=r.sent,t.tweets=a.data,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),C["c"].fire({icon:"error",title:"無法拿到你的推文回復資料，請稍後再試唷"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchRecommendUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getTopUsers();case 3:r=t.sent,e.recommendUsers=Object(W["a"])(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得推薦資料，請稍後再試"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},afterClickFollow:function(){this.fetchRecommendUsers();var e=this.$route.params.id;this.fetchOtherUser(e)},afterHadleChangeActive:function(e){switch(this.tabActive={tweetsArea:"",replyTweestArea:"",liekdArea:""},e){case"tweetsArea":this.tabActive.tweetsArea="active",this.fetchOtherUserTweets(this.otherUser.id);break;case"replyTweestArea":this.tabActive.replyTweestArea="active",this.fetchUserRepliedTweets(this.otherUser.id);break;case"liekdArea":this.tabActive.liekdArea="active",this.fetchUserLike(this.otherUser.id);break}},afterGetLike:function(){var e=this.tweets.map((function(e){return e.Tweet.isLike=e.isLike,e.Tweet.ReplyCount=e.ReplyCount,e.Tweet.likeCount=e.likeCount,e.Tweet}));this.tweets=e},afterHandleFollow:function(){this.otherUser.isFollowed=!0},afterHandleUnfollow:function(){this.otherUser.isFollowed=!1},afterhandleSubscription:function(){this.otherUser.isSubscription=!0},afterhandleUnSubscription:function(){this.otherUser.isSubscription=!1}}},Ge=Me,Je=(r("fef0"),Object(o["a"])(Ge,Fe,Ie,!1,null,"1439e298",null)),Ke=Je.exports,Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-xxl"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("Sidebar",{attrs:{active:e.active,currentUser:e.currentUser}})],1),r("div",{staticClass:"row col-10 px-0"},[r("div",{staticClass:"col-12 col-md-4 mid-col onlineList-wrapping px-0"},[e._m(0),r("div",{staticClass:"onlineList-users"},e._l(e.onlineUsers,(function(t){return r("div",{key:t.id,staticClass:"user d-flex flex-row"},[r("div",{staticClass:"avatar-wrapping"},[r("div",{staticClass:"avatar"},[r("img",{staticClass:"avatar-img",attrs:{src:t.avatar,alt:""}})])]),r("div",{staticClass:"user-name"},[r("span",{staticClass:"name"},[e._v(e._s(t.name)+" "),r("span",{staticClass:"account"},[e._v("@"+e._s(t.account))])])])])})),0)]),r("div",{staticClass:"col-12 col-md-8 right-col chatlog-wrapping px-0"},[r("Chatlog",{attrs:{onlineUsersName:e.onlineUsersName}})],1)])])])},We=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"onlineList-title"},[r("span",{staticClass:"onlineList-title-word"},[e._v("上線使用者(5)")])])}],Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapping d-flex flex-column px-0"},[r("div",{staticClass:"title"},[e._v("公開聊天室")]),r("div",{staticClass:"dialogue d-flex flex-column-reverse"},e._l(e.datas,(function(t){return r("div",{key:t.createdAt,staticClass:"message-data",class:t.messageOwner},[r("div",{staticClass:"avatar-area"},[r("div",{staticClass:"avatar"},[r("img",{staticClass:"avatar-img",attrs:{src:t.User?t.User.avatar:t.avatar,alt:"使用者照片"}})])]),r("div",{staticClass:"text"},[r("div",{staticClass:"text-content"},[e._v(" "+e._s(t.content)+" ")]),r("div",{staticClass:"text-time"},[e._v(e._s(e._f("chatTime")(t.createdAt)))])])])})),0),r("div",{staticClass:"footer-space"}),r("div",{staticClass:"footer"},[r("div",{staticClass:"row px-3"},[r("div",{staticClass:"col-10 typing-area px-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],attrs:{type:"text",placeholder:"輸入訊息..."},domProps:{value:e.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)},input:function(t){t.target.composing||(e.text=t.target.value)}}})]),r("div",{staticClass:"col-2 enter-button d-flex justify-content-center align-items-center px-0"},[r("button",{on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.send(t)}}},[r("font-awesome-icon",{staticClass:"enter-button-icon",attrs:{icon:"paper-plane"}})],1)])])])])},Xe=[],Ye=(r("159b"),r("2f62")),Ze={name:"chatlog",props:{onlineUsersName:{type:Array,required:!0}},mixins:[Y["a"]],data:function(){return{datas:[],text:"",onlineUsers:[]}},computed:Object($["a"])({},Object(Ye["b"])(["currentUser"])),created:function(){console.log("Chatlog---onlineUser",this.onlineUsersName),this.onlineSend()},mounted:function(){this.$socket.emit("startChat")},methods:{connect:function(){this.$socket.open()},send:function(){this.text?(this.$socket.emit("publicMessage",{id:this.currentUser.id,content:this.text}),console.log("text:",this.text),this.text=""):C["c"].fire({icon:"error",title:"請輸入內容好咩～"})},onlineSend:function(){this.$socket.emit("publicMessage",{id:this.currentUser.id,content:this.currentUser.name+"上線"})}},sockets:{publicMessage:function(e){e.id===this.currentUser.id?e.content===this.currentUser.name+"上線"?(e.messageOwner="moment",this.datas.unshift(e)):(e.messageOwner="self",this.datas.unshift(e)):(e.messageOwner="other",this.datas.unshift(e))},history:function(e){var t,r=this.onlineUsers;console.log("test-1",r);var a=e.reverse(),s=this.currentUser.id,n=this.currentUser.name;a.forEach((function(e){e.UserId===s?e.content===n+"上線"?e.messageOwner="moment":e.messageOwner="self":(console.log("test-2",r),r.some((function(t){return t!==e.name+"上線"}))?e.messageOwner="moment":e.messageOwner="other")})),(t=this.datas).push.apply(t,Object(W["a"])(a))}}},et=Ze,tt=(r("045e"),Object(o["a"])(et,Qe,Xe,!1,null,"6c918982",null)),rt=tt.exports,at={name:"Chatroom",components:{Chatlog:rt,Sidebar:F["a"]},data:function(){return{active:{chatroom:"active"},currentUser:{id:"",account:"",name:"",avatar:"",cover:"",email:"",introduction:"",Followers:[],Followings:[]},onlineUsers:[],onlineUsersName:[]}},created:function(){this.fetchCurrentUser(),this.fetchOnlineUsers()},methods:{fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getCurrentUser();case 3:r=t.sent,e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得使用者資料"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchOnlineUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].getOtherUsers();case 3:r=t.sent,a=r.data,e.onlineUsers=Object(W["a"])(a),e.onlineUsersName=e.onlineUsers.map((function(e){return e.name+"上線"})),console.log("Chatroom----onlineUsersName",e.onlineUsersName),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),C["c"].fire({icon:"error",title:"無法取得上線使用者資料"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},st=at,nt=(r("355d"),Object(o["a"])(st,Ve,We,!1,null,"60afa28d",null)),it=nt.exports;a["a"].use(Ye["a"]);var ct=new Ye["a"].Store({state:{currentUser:{account:"",email:"",id:-1,name:"",avatar:"",cover:"",role:"",tweetCount:-1,Followers:[],Followings:[]},currentAdminUser:{id:-1,name:"",email:"",account:"",role:""},isAuthenticated:!1},mutations:{setCurrentUser:function(e,t){e.currentUser=Object($["a"])(Object($["a"])({},e.currentUser),t),e.isAuthenticated=!0},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,localStorage.removeItem("token")},setCurrentAdminUser:function(e,t){e.currentAdminUser=Object($["a"])(Object($["a"])({},e.currentAdminUser),t),e.isAuthenticated=!0}},actions:{fetchCurrentUser:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n,i,c,o,l,u,d,m,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,E["a"].getCurrentUser();case 4:return a=t.sent,s=a.data,n=s.id,i=s.account,c=s.name,o=s.email,l=s.avatar,u=s.cover,d=s.role,m=s.tweetCount,p=s.Followers,f=s.Followings,r("setCurrentUser",{id:n,account:i,name:c,email:o,avatar:l,cover:u,role:d,tweetCount:m,Followers:p,Followings:f}),t.abrupt("return",!0);case 11:t.prev=11,t.t0=t["catch"](1),console.log("error",t.t0),console.error("不能取得當前使用者的資料");case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},modules:{}});a["a"].use(m["a"]);var ot=[{path:"/",name:"root",redirect:"/signin"},{path:"/signin",name:"sign-in",component:_},{path:"/signup",name:"sign-up",component:P},{path:"/setting",name:"setting",component:B},{path:"/admin",exact:!0,redirect:"/admin/signin"},{path:"/admin/twitter",name:"admin-twitter",component:function(){return r.e("chunk-a9e92636").then(r.bind(null,"6b3a"))}},{path:"/admin/users",name:"admin-users",component:function(){return r.e("chunk-56c36846").then(r.bind(null,"6094"))}},{path:"/admin/signin",name:"admin-sign-in",component:J},{path:"/main",name:"main",component:oe},{path:"/tweets/:id",name:"reply-list",component:fe},{path:"/user/self/",name:"user-self",component:Ee},{path:"/user/:id/followers",name:"user-follower",component:function(){return r.e("chunk-5a8602ac").then(r.bind(null,"7384"))}},{path:"/user/:id/followings",name:"user-following",component:function(){return r.e("chunk-923796f6").then(r.bind(null,"cc95"))}},{path:"/user/chatroom",name:"chatroom",component:it},{path:"/user/:id",name:"user-other",component:Ke},{path:"*",name:"not-found",component:w}],lt=new m["a"]({routes:ot});lt.beforeEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=localStorage.getItem("token"),n=!1,!s){e.next=6;break}return e.next=5,ct.dispatch("fetchCurrentUser");case 5:n=e.sent;case 6:if(i=["sign-up","sign-in","admin-sign-in","/"],n||i.includes(t.name)){e.next=10;break}return a("/signin"),e.abrupt("return");case 10:if(!n||!i.includes(t.name)){e.next=13;break}return a("/main"),e.abrupt("return");case 13:a();case 14:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}());var ut=lt,dt=r("5132"),mt=r.n(dt),pt=r("8e27"),ft=r.n(pt),vt=r("ecee"),ht=r("ad3d"),wt=r("c074");a["a"].config.productionTip=!1,a["a"].use(new mt.a({debug:!0,connection:ft()("https://serene-tor-37529.herokuapp.com/")})),vt["c"].add(wt["d"],wt["g"],wt["b"],wt["f"],wt["a"],wt["c"],wt["e"]),a["a"].component("font-awesome-icon",ht["a"]),new a["a"]({sockets:{connect:function(){console.log("socket connected")}},router:ut,store:ct,render:function(e){return e(u)}}).$mount("#app")},"5ea5":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex flex-column wrapping align-items-start align-items-md-stretch"},[e._m(0),r("router-link",{staticClass:"nav-link",attrs:{to:{name:"main"}}},[r("div",{staticClass:"twitter row mt-4 d-flex justify-content-center",class:e.active.home},[r("div",{staticClass:"twitter-icon col-2"},[r("font-awesome-icon",{attrs:{icon:"home"}})],1),r("div",{staticClass:"nav-content col-8 d-none d-md-block"},[r("p",[e._v("首頁")])])])]),r("router-link",{staticClass:"nav-link",attrs:{to:{name:"chatroom"}}},[r("div",{staticClass:"twitter row mt-4 d-flex justify-content-center",class:e.active.chatroom},[r("div",{staticClass:"twitter-icon col-2"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.active.chatroom,expression:"!active.chatroom"}],staticClass:"notice-point"}),r("font-awesome-icon",{attrs:{icon:"envelope"}})],1),r("div",{staticClass:"nav-content col-8 d-none d-md-block"},[r("p",[e._v("公開聊天室")])])])]),r("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-self"}}},[r("div",{staticClass:"twitter row mt-4 d-flex justify-content-center",class:e.active.self},[r("div",{staticClass:"twitter-icon col-2"},[r("font-awesome-icon",{attrs:{icon:"user"}})],1),r("div",{staticClass:"nav-content col-8 d-none d-md-block"},[r("p",[e._v("個人資料")])])])]),r("router-link",{staticClass:"nav-link",attrs:{to:{name:"setting"}}},[r("div",{staticClass:"twitter row mt-4 d-flex justify-content-center",class:e.active.setting},[r("div",{staticClass:"twitter-icon col-2"},[r("font-awesome-icon",{attrs:{icon:"cog"}})],1),r("div",{staticClass:"nav-content col-8 d-none d-md-block"},[r("p",[e._v("設定")])])])]),r("button",{staticClass:"btn mt-3 tweetButton p-0",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#newTweet"}},[e._v(" 推文 ")]),r("div",{staticClass:"mt-auto sign-out"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"}}},[r("div",{staticClass:"logout row mt-3 d-flex justify-content-center"},[r("div",{staticClass:"logout-icon col-2"},[r("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1),r("div",{staticClass:"userCard-content col-8 d-none d-md-block",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.logout(t)}}},[r("p",[e._v("登出")])])])])],1),r("div",{staticClass:"modal fade",attrs:{id:"newTweet",tabindex:"-1","aria-labelledby":"exampleModalLabe1","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[e._m(1),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"modal-img-cut"},[r("img",{staticClass:"cerrunt-user-img",attrs:{src:e.currentUser.avatar,alt:""}})]),r("div",{staticClass:"modal-new-post"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"modal-new-post",attrs:{rows:"6",cols:"46",placeholder:"有甚麼新鮮事"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])]),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn tweet-submit",attrs:{type:"submit"},on:{click:e.newTweetSubmit}},[e._v(" 推文 ")])])])])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"twitter row mt-4 d-flex justify-content-center"},[r("div",{staticClass:"twitter-icon col-2 me-3 me-md-0 ms-md-3"},[r("img",{staticClass:"logo-img",attrs:{src:"https://avatars.githubusercontent.com/u/8667311?s=200&v=4",alt:"ALPHAcamp logo"}})]),r("div",{staticClass:"twitter-content col-8 d-none d-md-block"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("div",{staticClass:"modal-title"},[r("div",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])])}],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("a4d3"),r("e01a"),r("498a"),r("6783")),o=r("2fa3"),l=r("2f62"),u={name:"Sidebar",props:{active:{type:Object,default:function(){return{home:"",self:"",setting:"",chatroom:""}}}},data:function(){return{description:""}},computed:Object(i["a"])({},Object(l["b"])(["currentUser"])),methods:{newTweetSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.description=e.description.trim(),e.description.length){t.next=7;break}return o["a"].fire({icon:"error",title:"請輸入正確內容"}),t.abrupt("return");case 7:if(!(e.description.length>140)){t.next=11;break}return o["a"].fire({icon:"error",title:"請勿超過140字數，目前"+e.description.length+"字"}),console.log("請勿超過140字數"),t.abrupt("return");case 11:return r=e.description,t.next=14,c["a"].postTweet({description:r});case 14:a=t.sent,console.log("post tweet:",a),o["a"].fire({icon:"success",title:"發文成功，enjoy!!"}),setTimeout("location.reload()",2200),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),o["a"].fire({icon:"error",title:"目前無法新增推文，請稍後再試～"});case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))()},logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}},d=u,m=(r("2fc8"),r("2877")),p=Object(m["a"])(d,a,s,!1,null,"6e02809c",null);t["a"]=p.exports},"62b6":function(e,t,r){},"66fd":function(e,t,r){},6783:function(e,t,r){"use strict";r("a4d3"),r("e01a");var a=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={getTweets:function(){return a["d"].get("/tweets",{headers:{Authorization:"Bearer ".concat(s())}})},getSingleTweet:function(e){return a["d"].get("/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},postTweet:function(e){var t=e.description;return a["d"].post("/tweets",{description:t},{headers:{Authorization:"Bearer ".concat(s())}})},postTweetsLike:function(e){return a["d"].post("/tweets/".concat(e,"/like"),"",{headers:{Authorization:"Bearer ".concat(s())}})},postTweetsUnlike:function(e){return a["d"].post("/tweets/".concat(e,"/unlike"),"",{headers:{Authorization:"Bearer ".concat(s())}})},replyTweet:function(e){var t=e.tweetId,r=e.comment;return console.log("api",t,r),a["d"].post("/tweets/".concat(t,"/replies"),{comment:r},{headers:{Authorization:"Bearer ".concat(s())}})}}},"6b3c":function(e,t,r){},"6cf9":function(e,t,r){},"6ed0":function(e,t,r){"use strict";r("66fd")},7552:function(e,t,r){},"85ec":function(e,t,r){},"8e32":function(e,t,r){},"95b5":function(e,t,r){"use strict";r("ca00")},a409:function(e,t,r){"use strict";r("f5df6")},aeae:function(e,t,r){"use strict";r("7552")},b074:function(e,t,r){e.exports=r.p+"img/heart-soild.e33c3ed5.svg"},b1f3:function(e,t,r){},c22d:function(e,t,r){},c317:function(e,t,r){"use strict";r("47b4")},ca00:function(e,t,r){},cb8f:function(e,t,r){"use strict";r("b1f3")},d839:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row user-nav"},[r("div",{staticClass:"col-1 arrow"},[r("font-awesome-icon",{attrs:{icon:"arrow-left"},on:{click:function(t){return e.$router.back()}}})],1),r("div",{staticClass:"col-10"},[r("span",{staticClass:"name-text"},[r("span",{staticClass:"arrow-name"},[e._v(e._s(e.currentUser.name))]),r("span",{staticClass:"arrow-tweets-count"},[e._v(e._s(e.currentUser.tweetCount)+"推文")])])])])},s=[],n={props:{currentUser:{type:Object,required:!0}}},i=n,c=(r("162f"),r("2877")),o=Object(c["a"])(i,a,s,!1,null,"0bbdad92",null);t["a"]=o.exports},de19:function(e,t,r){"use strict";r("fae1")},eea9:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapping mt-3"},[r("div",{staticClass:"recommmendation-title ps-3"},[e._v("跟隨誰")]),e._l(e.recommendUsers,(function(t){return r("div",{key:t.id,staticClass:"user"},[r("div",{staticClass:"user-image"},[r("div",{staticClass:"user-image-cut"},[r("img",{staticClass:"user-image-picture",attrs:{src:t.avatar?t.avatar:e.noneAvatar,alt:"user-picture"}})])]),r("div",{staticClass:"user-info ms-2"},[r("p",{staticClass:"mt-2 mb-0 user-name",attrs:{title:t.FollowerCount}},[e._v(" "+e._s(t.name)+" ")]),r("p",{staticClass:"user-account"},[e._v("@"+e._s(t.account))])]),r("div",{staticClass:"user-following"},[t.isFollowed?r("a",{attrs:{href:""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.unFollow(t.id)}}},[r("div",{staticClass:"user-following-btn text-center"},[e._v("正在跟隨")])]):r("a",{attrs:{href:""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.Follow(t.id)}}},[r("div",{staticClass:"user-follow-btn text-center"},[e._v("跟隨")])])])])})),5===e.recommendUsers.length?r("div",{staticClass:"recommmendation-footer ps-3"},[r("div",{staticClass:"displayMore",on:{click:e.moreRecommendUsers}},[e._v("顯示更多")])]):e._e()],2)},s=[],n=r("1da1"),i=r("5530"),c=r("2909"),o=(r("96cf"),r("fb6a"),r("d81d"),r("4cce")),l=r("2fa3"),u=r("2f62"),d={name:"RecommendationTable",props:{initialRecommendUsers:{type:Array,default:function(){return{id:"",name:"",account:"",avatar:"",FollowerCount:""}}}},data:function(){return{recommendUsers:Object(c["a"])(this.initialRecommendUsers),noneAvatar:"https://avatars.githubusercontent.com/u/8667311?s=200&v=4"}},created:function(){this.top5()},computed:Object(i["a"])({},Object(u["b"])(["currentUser"])),methods:{top5:function(){this.recommendUsers=this.recommendUsers.slice(0,5)},moreRecommendUsers:function(){this.recommendUsers=Object(c["a"])(this.initialRecommendUsers)},unFollow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].deleteFollowship(e);case 3:a=r.sent,console.log(a),t.recommendUsers=t.recommendUsers.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!1}):t})),t.$emit("after-click-follow"),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),l["c"].fire({icon:"error",title:"現在無法追蹤該使用者，請稍後再試～"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},Follow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].createFollowship({id:e});case 3:if(a=r.sent,"success"===a.data.status){r.next=6;break}throw new Error(a.data.message);case 6:t.recommendUsers=t.recommendUsers.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0}):t})),t.$emit("after-click-follow"),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),l["c"].fire({icon:"error",title:"現在無法追蹤該使用者，請稍後再試～"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}},watch:{initialRecommendUsers:function(e){this.recommendUsers=Object(c["a"])(e),this.top5()}}},m=d,p=(r("1a6f"),r("2877")),f=Object(p["a"])(m,a,s,!1,null,"4ae0b149",null);t["a"]=f.exports},f3c4:function(e,t,r){e.exports=r.p+"img/message-icon.6eecd2aa.svg"},f5df6:function(e,t,r){},f7b6:function(e,t,r){"use strict";r("6cf9")},fae1:function(e,t,r){},fbe8:function(e,t,r){e.exports=r.p+"img/heart.c4675a36.svg"},fef0:function(e,t,r){"use strict";r("1e56")}});
//# sourceMappingURL=app.e4d5f02f.js.map